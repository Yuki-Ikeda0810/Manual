# **ROS用語の説明**

本ページではROS用語について説明します．
どれもROSの基本となる説明なので熟読することを推奨します．

:arrow_forward: [ROSコマンドの説明](/docs/about_ros_command.md)

:arrow_forward: [ROSの使用方法](/docs/using_ros.md)

## **目次**

1. [ノード node](#1-ノード-node)
2. [パッケージ package](#2-パッケージ-package)
3. [マスタ master](#3-マスタ-master)
4. [トピック topic](#4-トピック-topic)
5. [メッセージ message](#5-メッセージ-message)
6. [パブリッシャ publisher](#6-パブリッシャ-publisher)
7. [サブスクライバ subscriber](#7-サブスクライバ-subscriber)
8. [サービス service](#8-サービス-service)
9. [サーバ server](#9-サーバ-server)
10. [クライアント client](#10-クライアント-client)
11. [アクション action](#11-アクション-action)


## 1. ノード node
目的ごとの最小プロセスの名称です．主にROSではプログラムの1つ1つにノードが設定されており，ノード同士が通信を行うことで目的のシステムを形成します．

## 2. パッケージ package
目的に沿ったノードやメッセージ，サービス，アクション等のプログラムがひとまとまりになったものの名称です．
開発は主にパッケージ単位で行われます．

## 3. マスタ master
ROSにおいて，ノード同士が通信するための名前の管理を行っているところです．
roscoreコマンドで起動しているのはマスタになります．このマスタが立ち上がっていないとノード同士が通信することが出来ません．

## 4. トピック topic
ノード間でやり取りするデータのことです．
相手の状態に関係なく，常にデータを発信しており，不特定多数がデータを受け取ることができます．つまり1対1通信だけでなく1対多通信が行えるということです．

## 5. メッセージ message
メッセージは，トピックでデータをやり取りするときに用いる「入れ物」のことです．
データは，メッセージの入れ物の「型」に合わせてあげる必要があり，このメッセージをやり取りすることで，通信を行います．
メッセージ名称や，入れ物の「型」等の設定は「.msg」ファイルに記述します．

**メッセージファイル例(std_msgs/String.msg)**
```
string data
```
このメッセージファイルは文字列のデータを扱う「入れ物」であり，「型」の種類は「string」となっています．
型は複数定義することもでき，複数の文字列を同時に送ったり，文字列と数値を同時に送ったりもできます．

## 6. パブリッシャ publisher
トピックの発信側のことです．
トピックを発信することを「パブリッシュ」といい，パブリッシャは常にトピックを発信し続けることができます．

## 7. サブスクライバ subscriber
トピックの受信側のことです．
トピックを受信することを「サブスクライブ」といい，パブリッシャによって発信されたトピックを受信します．
また，複数のサブスクライバが同時に同じトピックを受信することが出来ます．

<div align="center"><img src="/img/using_ros01.gif" width="90%"></div>
<div align="center">1対1通信の例</div>

<div align="center"><img src="/img/using_ros02.gif" width="90%"></div>
<div align="center">1体多，多対多通信の例</div>

---

## 8. サービス service
常に相手の状態に関係なく通信しているトピックに対し，サービスは要求があったときのみ応答する同期通信を行います．
また，トピックが１対多通信が可能だったのに対し，サービスは1対1通信になります．
トピックではデータの「入れ物」にメッセージを使用しましたが，サービスではサービス用のファイル「.srv」を使用します．

**サービス用ファイル例(std_srvs/SetBool.srv)**
```
bool data
---
bool success
string message
```
サービス用ファイルはメッセージファイルと異なり，要求となる「引数」と応答結果となる「返り値」の2つで構成されます．
「---」で区切られた上部が「引数」であり，下部が「返り値」となります．

## 9. サーバ server
サービスにおける応答をする側のことです．
トピック通信と異なり，要求がない場合はサーバとして応答の処理を行うことがありません．

## 10. クライアント client
サービスにおける要求をする側のことです．
クライアントはサービスの存在を確認してから，サーバに対して要求を行い，サーバからの応答があるまで待ちます．
サーバからの応答と返り値を受け取ることで1回のサービス通信が終わります．

<div align="center"><img src="/img/using_ros03.gif" width="90%"></div>
<div align="center">1対1通信の例</div>

<div align="center"><img src="/img/using_ros04.gif" width="90%"></div>
<div align="center">クライアントが複数ある1対1通信の例</div>


サービスの場合，一見1対多通信のようなネットワークを構築することはできますが，実際の処理として一度に行えるのは，1つの1対1通信のみとなります．

---

## 11. アクション action
アクションはサービスと同じように，要求するクライアントと応答するサーバがあります．
しかし，サービスと異なり，アクションは処理が長く応答するまでの時間がかかるときに使用し，処理の途中結果を受け取ることが出来ます．
そのため，1対1の非同期通信になります．

<div align="center"><img src="/img/using_ros05.gif" width="90%"></div>

---

[トップに戻る](#ros用語の説明)
